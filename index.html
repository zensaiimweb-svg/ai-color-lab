<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI COLOR LAB | í¼ìŠ¤ë„ ì»¬ëŸ¬ ì •ë°€ ì§„ë‹¨</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@100;400;700;900&display=swap" rel="stylesheet">
    <style>
        body { background-color: #000; color: #fff; font-family: 'Pretendard', sans-serif; text-align: center; padding: 50px 20px; margin: 0; }
        .container { max-width: 500px; margin: 0 auto; border: 1px solid #333; padding: 40px; border-radius: 20px; background: #111; box-shadow: 0 0 30px rgba(0,0,0,0.5); }
        h1 { font-weight: 200; letter-spacing: 5px; margin-bottom: 30px; }
        input { width: 100%; padding: 15px; margin: 10px 0; background: #222; border: 1px solid #444; color: #fff; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: #fff; color: #000; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 20px; font-size: 1.1rem; }
        
        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        #loading { display: none; margin: 20px 0; }
        .spinner { border: 4px solid #333; border-top: 4px solid #FF3548; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* ê²°ê³¼ ì˜ì—­ */
        #result { display: none; margin-top: 40px; padding: 30px; border-radius: 15px; background: #1a1a1a; border: 1px solid #FF3548; }
        .color-circle { width: 80px; height: 80px; border-radius: 50%; margin: 0 auto 20px; border: 3px solid #fff; }
        h2 { font-size: 2rem; color: #FF3548; margin: 10px 0; }
        
        /* ë“œë ˆì´í•‘ ì˜ì—­ */
        #draping-section { margin-top: 30px; border-top: 1px solid #333; padding-top: 20px; }
        #preview-container { position: relative; width: 100%; max-width: 250px; margin: 20px auto; border-radius: 10px; overflow: hidden; border: 2px solid #444; }
        #user-photo { width: 100%; display: block; background: #222; }
        .draping-bar { position: absolute; bottom: 0; left: 0; width: 100%; height: 35%; mix-blend-mode: multiply; opacity: 0.8; }
        .upload-label { display: inline-block; padding: 10px 20px; background: #444; border-radius: 5px; cursor: pointer; font-size: 0.8rem; margin-top: 10px; }
        
        .recommend-btn { display: block; width: 100%; padding: 15px; margin-top: 25px; background: linear-gradient(45deg, #FF3548, #FF6F61); color: #fff; text-decoration: none; border-radius: 8px; font-weight: bold; }
        .footer { margin-top: 50px; font-size: 0.8rem; color: #666; }
    </style>
</head>
<body>

<div class="container">
    <h1>AI COLOR LAB</h1>
    <p style="color:#888; font-size:0.9rem;">ì¸¡ì¸¡ê¸°(3nh)ì—ì„œ ì¸¡ì •ëœ ìˆ˜ì¹˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
    
    <input type="number" id="L_val" placeholder="L* (ë°ê¸°) ì…ë ¥">
    <input type="number" id="a_val" placeholder="a* (ë¶‰ì€ê¸°) ì…ë ¥">
    <input type="number" id="b_val" placeholder="b* (ë…¸ë€ê¸°) ì…ë ¥">
    
    <button onclick="startAnalysis()">AI ì •ë°€ ë¶„ì„ ì‹œì‘</button>

    <div id="loading">
        <div class="spinner"></div>
        <p>AIê°€ í”¼ë¶€ ì†ì„±ê³¼ ì´ë¯¸ì§€ë¥¼ ë§¤ì¹­ ì¤‘...</p>
    </div>

    <div id="result">
        <div id="skin-preview" class="color-circle"></div>
        <div id="analysis-text"></div>

        <div id="draping-section">
            <p style="font-size:0.8rem;">ğŸ“¸ ì–¼êµ´ ì‚¬ì§„ì„ ì˜¬ë ¤ ê°€ìƒ ë“œë ˆì´í•‘ì„ í™•ì¸í•˜ì„¸ìš”</p>
            <input type="file" id="photo-input" accept="image/*" onchange="loadPhoto(event)" style="display:none;">
            <label class="upload-label" for="photo-input">ì‚¬ì§„ ì„ íƒí•˜ê¸°</label>
            
            <div id="preview-container">
                <img id="user-photo" src="" alt="ì–¼êµ´ ì‚¬ì§„ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...">
                <div id="color-overlay" class="draping-bar"></div>
            </div>
        </div>

        <a id="shop-link" href="#" class="recommend-btn" target="_blank">ë‚˜ì˜ ë² ìŠ¤íŠ¸ ì»¬ëŸ¬ ì•„ì´í…œ ì‡¼í•‘í•˜ê¸°</a>
    </div>
</div>

<div class="footer">
    AI COLOR RESEARCH CENTER<br>
    Â© 2026 AI COLOR LAB. All rights reserved.
</div>

<script>
    // 1. Lab -> RGB ë³€í™˜ (ì‹œê°í™”ìš©)
    function labToRgb(l, a, b) {
        let y = (l + 16) / 116;
        let x = a / 500 + y;
        let z = y - b / 200;
        const f = (t) => (t > 0.206893 ? Math.pow(t, 3) : (t - 16 / 116) / 7.787);
        x = 0.95047 * f(x); y = 1.00000 * f(y); z = 1.08883 * f(z);
        let r = x * 3.2406 + y * -1.5372 + z * -0.4986;
        let g = x * -0.9689 + y * 1.8758 + z * 0.0415;
        let bl = x * 0.0557 + y * -0.2040 + z * 1.057;
        const clip = (c) => {
            c = c > 0.0031308 ? 1.055 * Math.pow(c, 1 / 2.4) - 0.055 : 12.92 * c;
            return Math.max(0, Math.min(255, Math.round(c * 255)));
        };
        return `rgb(${clip(r)}, ${clip(g)}, ${clip(bl)})`;
    }

    // 2. ì‚¬ì§„ ì—…ë¡œë“œ í•¨ìˆ˜
    function loadPhoto(event) {
        const reader = new FileReader();
        reader.onload = function() {
            document.getElementById('user-photo').src = reader.result;
        };
        reader.readAsDataURL(event.target.files[0]);
    }

    // 3. ë¶„ì„ ë©”ì¸ í•¨ìˆ˜
    async function startAnalysis() {
        const L = parseFloat(document.getElementById('L_val').value);
        const a = parseFloat(document.getElementById('a_val').value);
        const b = parseFloat(document.getElementById('b_val').value);

        if(isNaN(L) || isNaN(a) || isNaN(b)) {
            alert("ìˆ˜ì¹˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return;
        }

        document.getElementById('loading').style.display = "block";
        document.getElementById('result').style.display = "none";

        // 2ì´ˆ ë¶„ì„ ì• ë‹ˆë©”ì´ì…˜
        await new Promise(res => setTimeout(res, 2000));

        document.getElementById('loading').style.display = "none";
        document.getElementById('result').style.display = "block";

        // ì§„ë‹¨ ë¡œì§
        let type = "";
        let drapingColor = "";
        let searchQuery = "";

        const isWarm = b > 17.5; // ë…¸ë€ê¸° ê¸°ì¤€
        if (isWarm) {
            type = L > 65 ? "ë´„ ì›œ íŠ¸ë£¨ (Spring True)" : "ê°€ì„ ì›œ ë®¤íŠ¸ (Autumn Mute)";
            drapingColor = L > 65 ? "#FF7F50" : "#D2691E"; // ì½”ë„ vs ë¸Œë¼ìš´
            searchQuery = type + " ë¦½ìŠ¤í‹±";
        } else {
            type = L > 65 ? "ì—¬ë¦„ ì¿¨ ë¼ì´íŠ¸ (Summer Light)" : "ê²¨ìš¸ ì¿¨ ë¸Œë¼ì´íŠ¸ (Winter Bright)";
            drapingColor = L > 65 ? "#FFB6C1" : "#800020"; // í•‘í¬ vs ë²„ê±´ë””
            searchQuery = type + " ë©”ì´í¬ì—…";
        }

        // í™”ë©´ ì—…ë°ì´íŠ¸
        document.getElementById('skin-preview').style.backgroundColor = labToRgb(L, a, b);
        document.getElementById('analysis-text').innerHTML = `<h2>${type}</h2><p>ì¸¡ìƒ‰ ìˆ˜ì¹˜ ê¸°ë°˜ ìµœì ì˜ ì»¬ëŸ¬ì…ë‹ˆë‹¤.</p>`;
        document.getElementById('color-overlay').style.backgroundColor = drapingColor;
        document.getElementById('shop-link').href = `https://www.oliveyoung.co.kr/store/search/getSearchMain.do?query=${encodeURIComponent(searchQuery)}`;

        window.scrollTo({ top: document.getElementById('result').offsetTop, behavior: 'smooth' });
    }
</script>

</body>
</html>
