<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE COVE PREMIUM - Step 1</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body style="margin: 0; font-family: -apple-system, system-ui, sans-serif; background: #fafafa;">
    <div style="max-width: 1200px; margin: 0 auto; padding: 3rem 2rem;">
        <!-- Progress -->
        <div style="width: 100%; height: 6px; background: rgba(255,215,0,0.2); border-radius: 3px; margin-bottom: 3rem;">
            <div style="height: 100%; background: linear-gradient(90deg, #FFD700, #FFA500); width: 25%;"></div>
        </div>

        <!-- Header -->
        <div style="text-align: center; margin-bottom: 3rem;">
            <div style="font-size: 0.875rem; letter-spacing: 0.3em; color: #FFA500; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center; gap: 0.8rem;">
                <span style="background: linear-gradient(135deg, #FFD700, #FFA500); color: white; padding: 0.3rem 0.8rem; border-radius: 12px; font-size: 0.7rem; font-weight: 700;">PREMIUM</span>
                STEP 1 OF 4
            </div>
            <h1 style="font-size: 2.5rem; margin: 0 0 1rem 0;">ì´ˆì •ë°€ ì¸¡ìƒ‰ ë° ë°ì´í„° ì‹œê°í™”</h1>
            <p style="font-size: 1.1rem; color: #666;">4ë¶€ìœ„ë¥¼ ì¸¡ì •í•˜ì—¬ ì •í™•í•œ í”¼ë¶€ ë°”íƒ•ìƒ‰ì„ ë¶„ì„í•©ë‹ˆë‹¤.</p>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" style="display: none; background: linear-gradient(135deg, rgba(255,215,0,0.05) 0%, white 100%); border: 3px solid #FFD700; border-radius: 16px; padding: 2.5rem; margin-bottom: 3rem;">
            <h3 style="font-size: 1.8rem; text-align: center; margin-bottom: 2rem;">ğŸ“Š ì‹¤ì‹œê°„ ë°ì´í„° ë¶„ì„</h3>
            
            <!-- Metrics -->
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem; margin-bottom: 2rem;">
                <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    <div style="font-weight: 600; margin-bottom: 1rem;">ëª…ë„ (L)</div>
                    <div style="height: 30px; background: #f0f0f0; border-radius: 15px; overflow: hidden; margin-bottom: 0.8rem;">
                        <div id="lBar" style="height: 100%; background: linear-gradient(90deg, #4A90E5, #6FB3E0); width: 0%; transition: width 1s;"></div>
                    </div>
                    <div id="lValue" style="text-align: right; font-weight: 700; color: #FFA500; font-size: 1.2rem;">-</div>
                    <p id="lComment" style="font-size: 0.85rem; color: #666; margin: 0.5rem 0 0 0;"></p>
                </div>

                <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    <div style="font-weight: 600; margin-bottom: 1rem;">ë¶‰ì€ê¸° (A)</div>
                    <div style="height: 30px; background: #f0f0f0; border-radius: 15px; overflow: hidden; margin-bottom: 0.8rem;">
                        <div id="aBar" style="height: 100%; background: linear-gradient(90deg, #E85D75, #FF8FA3); width: 0%; transition: width 1s;"></div>
                    </div>
                    <div id="aValue" style="text-align: right; font-weight: 700; color: #FFA500; font-size: 1.2rem;">-</div>
                    <p id="aComment" style="font-size: 0.85rem; color: #666; margin: 0.5rem 0 0 0;"></p>
                </div>

                <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    <div style="font-weight: 600; margin-bottom: 1rem;">ë…¸ë€ê¸° (B)</div>
                    <div style="height: 30px; background: #f0f0f0; border-radius: 15px; overflow: hidden; margin-bottom: 0.8rem;">
                        <div id="bBar" style="height: 100%; background: linear-gradient(90deg, #FFD700, #FFA500); width: 0%; transition: width 1s;"></div>
                    </div>
                    <div id="bValue" style="text-align: right; font-weight: 700; color: #FFA500; font-size: 1.2rem;">-</div>
                    <p id="bComment" style="font-size: 0.85rem; color: #666; margin: 0.5rem 0 0 0;"></p>
                </div>
            </div>

            <!-- Analysis -->
            <div style="background: white; padding: 2rem; border-radius: 12px; border-left: 4px solid #FFD700; margin-bottom: 2rem; display: flex; gap: 1rem;">
                <div style="font-size: 2rem;">ğŸ’¡</div>
                <p id="analysisText" style="color: #666; line-height: 1.8; margin: 0; font-size: 1.05rem;"></p>
            </div>

            <!-- TOP 3 -->
            <div style="background: white; padding: 2rem; border-radius: 16px; border: 3px solid #FFD700;">
                <h4 style="font-size: 1.5rem; margin: 0 0 1.5rem 0; text-align: center;">ğŸ† ìœ ë ¥ í›„ë³´êµ° TOP 3</h4>
                <div id="candidatesList"></div>
            </div>
        </div>

        <!-- Measurements -->
        <div style="margin-bottom: 3rem;">
            <!-- Forehead -->
            <div style="background: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem; border: 2px solid #e0e0e0;">
                <h3 style="font-size: 1.3rem; margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 1rem;">
                    <span style="font-size: 1.8rem;">1ï¸âƒ£</span> ì´ë§ˆ ì¤‘ì•™
                </h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem;">
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">L (ëª…ë„)</label>
                        <input type="number" id="forehead_l" min="0" max="100" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">0-100</p>
                    </div>
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">A (ì´ˆë¡â†”ë¹¨ê°•)</label>
                        <input type="number" id="forehead_a" min="-128" max="127" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">-128 ~ 127</p>
                    </div>
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">B (íŒŒë‘â†”ë…¸ë‘)</label>
                        <input type="number" id="forehead_b" min="-128" max="127" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">-128 ~ 127</p>
                    </div>
                </div>
                <div id="preview_forehead" style="height: 60px; border-radius: 8px; border: 2px solid #e0e0e0; display: flex; align-items: center; justify-content: center; color: #666;">ì¸¡ì • ëŒ€ê¸° ì¤‘...</div>
            </div>

            <!-- Cheek -->
            <div style="background: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem; border: 2px solid #e0e0e0;">
                <h3 style="font-size: 1.3rem; margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 1rem;">
                    <span style="font-size: 1.8rem;">2ï¸âƒ£</span> ë³¼
                </h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem;">
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">L (ëª…ë„)</label>
                        <input type="number" id="cheek_l" min="0" max="100" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">0-100</p>
                    </div>
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">A (ì´ˆë¡â†”ë¹¨ê°•)</label>
                        <input type="number" id="cheek_a" min="-128" max="127" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">-128 ~ 127</p>
                    </div>
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">B (íŒŒë‘â†”ë…¸ë‘)</label>
                        <input type="number" id="cheek_b" min="-128" max="127" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">-128 ~ 127</p>
                    </div>
                </div>
                <div id="preview_cheek" style="height: 60px; border-radius: 8px; border: 2px solid #e0e0e0; display: flex; align-items: center; justify-content: center; color: #666;">ì¸¡ì • ëŒ€ê¸° ì¤‘...</div>
            </div>

            <!-- Jawline -->
            <div style="background: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem; border: 2px solid #e0e0e0;">
                <h3 style="font-size: 1.3rem; margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 1rem;">
                    <span style="font-size: 1.8rem;">3ï¸âƒ£</span> í„±ì„ 
                </h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem;">
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">L (ëª…ë„)</label>
                        <input type="number" id="jawline_l" min="0" max="100" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">0-100</p>
                    </div>
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">A (ì´ˆë¡â†”ë¹¨ê°•)</label>
                        <input type="number" id="jawline_a" min="-128" max="127" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">-128 ~ 127</p>
                    </div>
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">B (íŒŒë‘â†”ë…¸ë‘)</label>
                        <input type="number" id="jawline_b" min="-128" max="127" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">-128 ~ 127</p>
                    </div>
                </div>
                <div id="preview_jawline" style="height: 60px; border-radius: 8px; border: 2px solid #e0e0e0; display: flex; align-items: center; justify-content: center; color: #666;">ì¸¡ì • ëŒ€ê¸° ì¤‘...</div>
            </div>

            <!-- Neck (Premium) -->
            <div style="background: linear-gradient(135deg, rgba(255,215,0,0.05) 0%, white 100%); padding: 2rem; border-radius: 12px; margin-bottom: 2rem; border: 3px solid #FFD700;">
                <h3 style="font-size: 1.3rem; margin: 0 0 1.5rem 0; display: flex; align-items: center; gap: 1rem;">
                    <span style="font-size: 1.8rem;">4ï¸âƒ£</span> ëª©
                    <span style="background: linear-gradient(135deg, #FFD700, #FFA500); color: white; padding: 0.2rem 0.6rem; border-radius: 8px; font-size: 0.65rem; font-weight: 700;">PREMIUM</span>
                </h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem;">
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">L (ëª…ë„)</label>
                        <input type="number" id="neck_l" min="0" max="100" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">0-100</p>
                    </div>
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">A (ì´ˆë¡â†”ë¹¨ê°•)</label>
                        <input type="number" id="neck_a" min="-128" max="127" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">-128 ~ 127</p>
                    </div>
                    <div>
                        <label style="font-weight: 500; margin-bottom: 0.5rem; display: block;">B (íŒŒë‘â†”ë…¸ë‘)</label>
                        <input type="number" id="neck_b" min="-128" max="127" step="0.1" placeholder="0" oninput="update()" style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                        <p style="font-size: 0.75rem; color: #666; margin: 0.3rem 0 0 0;">-128 ~ 127</p>
                    </div>
                </div>
                <div id="preview_neck" style="height: 60px; border-radius: 8px; border: 2px solid #e0e0e0; display: flex; align-items: center; justify-content: center; color: #666;">ì¸¡ì • ëŒ€ê¸° ì¤‘...</div>
            </div>
        </div>

        <!-- Average -->
        <div style="background: linear-gradient(135deg, rgba(255,215,0,0.1) 0%, white 100%); padding: 2.5rem; border-radius: 16px; border: 3px solid #FFD700; text-align: center; margin-bottom: 3rem;">
            <h3 style="font-size: 1.5rem; margin: 0 0 1rem 0;">ğŸ“Š 4ë¶€ìœ„ í‰ê·  í”¼ë¶€í†¤</h3>
            <div id="avgValues" style="font-size: 1.3rem; font-weight: 600; color: #FFA500; margin-bottom: 1.5rem;">L: - / A: - / B: -</div>
            <div id="avgPreview" style="height: 120px; border-radius: 12px; border: 2px solid #e0e0e0; display: flex; align-items: center; justify-content: center;">4ê°œ ë¶€ìœ„ë¥¼ ëª¨ë‘ ì¸¡ì •í•˜ë©´ í‰ê· ê°’ì´ í‘œì‹œë©ë‹ˆë‹¤</div>
        </div>

        <!-- Buttons -->
        <div style="display: flex; gap: 1rem; justify-content: center;">
            <button onclick="goBack()" style="padding: 1rem 2.5rem; font-size: 1rem; border: none; border-radius: 8px; cursor: pointer; background: #e0e0e0; color: #333;">â† ì´ì „</button>
            <button id="nextBtn" onclick="goNext()" disabled style="padding: 1rem 2.5rem; font-size: 1rem; border: none; border-radius: 8px; cursor: pointer; background: linear-gradient(135deg, #FFD700, #FFA500); color: white; font-weight: 600; opacity: 0.5;">ë‹¤ìŒ ë‹¨ê³„ë¡œ â†’</button>
        </div>
    </div>

    <script>
        const KA={L:62,a:10.5,b:14.2};
        const types={
            light_spring:{L:[65,75],a:[8,15],b:[12,20],chroma:[15,25]},
            bright_spring:{L:[60,70],a:[10,18],b:[15,25],chroma:[25,40]},
            warm_spring:{L:[58,68],a:[8,14],b:[18,28],chroma:[20,30]},
            light_summer:{L:[65,75],a:[12,18],b:[8,14],chroma:[12,20]},
            soft_summer:{L:[58,68],a:[10,16],b:[10,16],chroma:[10,18]},
            cool_summer:{L:[60,70],a:[12,20],b:[6,12],chroma:[15,25]},
            soft_autumn:{L:[55,65],a:[8,14],b:[14,22],chroma:[12,20]},
            warm_autumn:{L:[52,62],a:[10,16],b:[18,28],chroma:[20,30]},
            deep_autumn:{L:[45,55],a:[10,18],b:[16,26],chroma:[25,35]},
            cool_winter:{L:[55,65],a:[14,22],b:[4,10],chroma:[20,30]},
            bright_winter:{L:[58,68],a:[12,20],b:[6,12],chroma:[28,40]},
            deep_winter:{L:[45,55],a:[12,20],b:[4,12],chroma:[25,35]}
        };
        const names={
            light_spring:'ë¼ì´íŠ¸ ë´„',bright_spring:'ë¸Œë¼ì´íŠ¸ ë´„',warm_spring:'ì›œ ë´„',
            light_summer:'ë¼ì´íŠ¸ ì—¬ë¦„',soft_summer:'ì†Œí”„íŠ¸ ì—¬ë¦„',cool_summer:'ì¿¨ ì—¬ë¦„',
            soft_autumn:'ì†Œí”„íŠ¸ ê°€ì„',warm_autumn:'ì›œ ê°€ì„',deep_autumn:'ë”¥ ê°€ì„',
            cool_winter:'ì¿¨ ê²¨ìš¸',bright_winter:'ë¸Œë¼ì´íŠ¸ ê²¨ìš¸',deep_winter:'ë”¥ ê²¨ìš¸'
        };
        let data={forehead:{},cheek:{},jawline:{},neck:{},average:{}};

        function rgb(l,a,b){
            let y=(l+16)/116,x=a/500+y,z=y-b/200;
            x=0.95047*((x**3>0.008856)?x**3:(x-16/116)/7.787);
            y=1.00000*((y**3>0.008856)?y**3:(y-16/116)/7.787);
            z=1.08883*((z**3>0.008856)?z**3:(z-16/116)/7.787);
            let r=x*3.2406+y*-1.5372+z*-0.4986,g=x*-0.9689+y*1.8758+z*0.0415,bl=x*0.0557+y*-0.2040+z*1.0570;
            r=(r>0.0031308)?(1.055*r**(1/2.4)-0.055):12.92*r;
            g=(g>0.0031308)?(1.055*g**(1/2.4)-0.055):12.92*g;
            bl=(bl>0.0031308)?(1.055*bl**(1/2.4)-0.055):12.92*bl;
            return{r:Math.max(0,Math.min(255,Math.round(r*255))),g:Math.max(0,Math.min(255,Math.round(g*255))),b:Math.max(0,Math.min(255,Math.round(bl*255)))};
        }

        function sc(lab,type){
            const t=types[type];let s=100,c=Math.sqrt(lab.a**2+lab.b**2);
            if(lab.l<t.L[0]||lab.l>t.L[1])s-=Math.min(30,Math.min(Math.abs(lab.l-t.L[0]),Math.abs(lab.l-t.L[1]))*3);
            if(lab.a<t.a[0]||lab.a>t.a[1])s-=Math.min(25,Math.min(Math.abs(lab.a-t.a[0]),Math.abs(lab.a-t.a[1]))*2.5);
            if(lab.b<t.b[0]||lab.b>t.b[1])s-=Math.min(25,Math.min(Math.abs(lab.b-t.b[0]),Math.abs(lab.b-t.b[1]))*2.5);
            if(c<t.chroma[0]||c>t.chroma[1])s-=Math.min(20,Math.min(Math.abs(c-t.chroma[0]),Math.abs(c-t.chroma[1]))*2);
            return Math.max(0,s);
        }

        function top3(lab){
            return Object.keys(types).map(k=>({type:k,name:names[k],score:sc(lab,k)}))
                .sort((a,b)=>b.score-a.score).slice(0,3)
                .map((x,i)=>{
                    const t=types[x.type],r=[],c=Math.sqrt(lab.a**2+lab.b**2);
                    if(lab.l>=t.L[0]&&lab.l<=t.L[1])r.push(`ëª…ë„(L:${lab.l.toFixed(1)}) ë²”ìœ„ ë‚´`);
                    if((t.b[0]+t.b[1])/2>14&&lab.b>12)r.push('ì›œí†¤ ì¼ì¹˜');
                    else if((t.b[0]+t.b[1])/2<12&&lab.b<10)r.push('ì¿¨í†¤ ì¼ì¹˜');
                    if(c>=t.chroma[0]&&c<=t.chroma[1])r.push(`ì±„ë„(${c.toFixed(1)}) ì í•©`);
                    return{rank:i+1,name:x.name,score:x.score,conf:Math.round(x.score)+'%',reasons:r.join(', ')||'ì¢…í•© ë¶„ì„'};
                });
        }

        function prev(area,l,a,b){
            const p=document.getElementById('preview_'+area);
            if(l>0){
                const c=rgb(l,a,b);
                p.style.backgroundColor=`rgb(${c.r},${c.g},${c.b})`;
                p.textContent=`LAB(${l.toFixed(1)}, ${a.toFixed(1)}, ${b.toFixed(1)})`;
                p.style.color=l>50?'#333':'#fff';p.style.fontWeight='600';
            }
        }

        function update(){
            const fl=parseFloat(document.getElementById('forehead_l').value)||0,fa=parseFloat(document.getElementById('forehead_a').value)||0,fb=parseFloat(document.getElementById('forehead_b').value)||0;
            const cl=parseFloat(document.getElementById('cheek_l').value)||0,ca=parseFloat(document.getElementById('cheek_a').value)||0,cb=parseFloat(document.getElementById('cheek_b').value)||0;
            const jl=parseFloat(document.getElementById('jawline_l').value)||0,ja=parseFloat(document.getElementById('jawline_a').value)||0,jb=parseFloat(document.getElementById('jawline_b').value)||0;
            const nl=parseFloat(document.getElementById('neck_l').value)||0,na=parseFloat(document.getElementById('neck_a').value)||0,nb=parseFloat(document.getElementById('neck_b').value)||0;
            
            prev('forehead',fl,fa,fb);prev('cheek',cl,ca,cb);prev('jawline',jl,ja,jb);prev('neck',nl,na,nb);
            data={forehead:{l:fl,a:fa,b:fb},cheek:{l:cl,a:ca,b:cb},jawline:{l:jl,a:ja,b:jb},neck:{l:nl,a:na,b:nb}};
            
            if(document.getElementById('forehead_l').value&&document.getElementById('cheek_l').value&&document.getElementById('jawline_l').value&&document.getElementById('neck_l').value){
                const al=((fl+cl+jl+nl)/4).toFixed(2),aa=((fa+ca+ja+na)/4).toFixed(2),ab=((fb+cb+jb+nb)/4).toFixed(2);
                data.average={l:parseFloat(al),a:parseFloat(aa),b:parseFloat(ab)};
                
                document.getElementById('avgValues').textContent=`L: ${al} / A: ${aa} / B: ${ab}`;
                const c=rgb(parseFloat(al),parseFloat(aa),parseFloat(ab)),p=document.getElementById('avgPreview');
                p.style.backgroundColor=`rgb(${c.r},${c.g},${c.b})`;p.textContent='í‰ê·  í”¼ë¶€í†¤';
                p.style.color=parseFloat(al)>50?'#333':'#fff';p.style.fontWeight='600';p.style.fontSize='1.2rem';
                
                dash(parseFloat(al),parseFloat(aa),parseFloat(ab));
                document.getElementById('nextBtn').disabled=false;
                document.getElementById('nextBtn').style.opacity='1';
            }else{
                document.getElementById('nextBtn').disabled=true;
                document.getElementById('nextBtn').style.opacity='0.5';
                document.getElementById('dashboard').style.display='none';
            }
        }

        function dash(l,a,b){
            document.getElementById('dashboard').style.display='block';
            document.getElementById('lBar').style.width=(l/100*100)+'%';
            document.getElementById('lValue').textContent=l.toFixed(1);
            const lz=(l-KA.L)/5.5;
            document.getElementById('lComment').textContent=lz>1.5?'í•œêµ­ì¸ í‰ê·  ëŒ€ë¹„ ìƒìœ„ 7% (ë§¤ìš° ë°ìŒ)':lz>0.5?'í•œêµ­ì¸ í‰ê·  ëŒ€ë¹„ ë°ì€ í¸ (ìƒìœ„ 30%)':lz>-0.5?'í•œêµ­ì¸ í‰ê·  ë²”ìœ„':'í•œêµ­ì¸ í‰ê· ë³´ë‹¤ ì–´ë‘ìš´ í¸';
            
            document.getElementById('aBar').style.width=((a+128)/255*100)+'%';
            document.getElementById('aValue').textContent=(a>0?'+':'')+a.toFixed(1);
            const ad=a-KA.a;
            document.getElementById('aComment').textContent=ad>5?'ê°•í•œ í•‘í¬ ì–¸ë”í†¤':ad>0?'í•‘í¬ ì–¸ë”í†¤':ad>-5?'ì¤‘ì„±~ì˜¬ë¦¬ë¸Œ':'ê°•í•œ ì˜¬ë¦¬ë¸Œ ì–¸ë”í†¤';
            
            document.getElementById('bBar').style.width=((b+128)/255*100)+'%';
            document.getElementById('bValue').textContent=(b>0?'+':'')+b.toFixed(1);
            const bd=b-KA.b;
            document.getElementById('bComment').textContent=bd>5?'ê°•í•œ ì›œí†¤':bd>0?'ì›œí†¤':bd>-5?'ì¤‘ì„±':'ì¿¨í†¤';
            
            document.getElementById('analysisText').textContent=`í•œêµ­ì¸ í‰ê· (L:${KA.L}, A:${KA.a}, B:${KA.b}) ëŒ€ë¹„ ë¶„ì„ ê²°ê³¼ì…ë‹ˆë‹¤.`;
            
            const t3=top3({l,a,b});data.top3=t3;
            const list=document.getElementById('candidatesList');list.innerHTML='';
            t3.forEach(x=>{
                const d=document.createElement('div');
                d.style='background:'+(x.rank===1?'linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,215,0,0.05))':'#f5f5f5')+'; padding:1.5rem; border-radius:12px; margin-bottom:1rem; border-left:'+(x.rank===1?'8px':'5px')+' solid #FFD700;';
                d.innerHTML=`
                    <div style="display:flex; align-items:center; margin-bottom:0.5rem;">
                        <span style="background:linear-gradient(135deg,#FFD700,#FFA500); color:white; padding:0.3rem 0.8rem; border-radius:8px; font-weight:700; font-size:0.9rem; margin-right:1rem;">${x.rank}ìœ„</span>
                        <span style="font-size:1.3rem; font-weight:600;">${x.name}</span>
                    </div>
                    <div style="color:#FFA500; font-weight:700; font-size:1.1rem; margin-bottom:0.5rem;">ì‹ ë¢°ë„: ${x.conf}</div>
                    <div style="color:#666; font-size:0.95rem;">ğŸ“Œ ì´ìœ : ${x.reasons}</div>
                `;
                list.appendChild(d);
            });
        }

        function goNext(){
            localStorage.setItem('personalColorData_premium',JSON.stringify({step1:data}));
            window.location.href='pcolor_pre1.5.html';
        }

        function goBack(){
            window.location.href='./';
        }

        window.onload=function(){
            const s=JSON.parse(localStorage.getItem('personalColorData_premium')||'{}');
            if(s.step1){
                const d=s.step1;
                if(d.forehead.l){document.getElementById('forehead_l').value=d.forehead.l;document.getElementById('forehead_a').value=d.forehead.a;document.getElementById('forehead_b').value=d.forehead.b;}
                if(d.cheek.l){document.getElementById('cheek_l').value=d.cheek.l;document.getElementById('cheek_a').value=d.cheek.a;document.getElementById('cheek_b').value=d.cheek.b;}
                if(d.jawline.l){document.getElementById('jawline_l').value=d.jawline.l;document.getElementById('jawline_a').value=d.jawline.a;document.getElementById('jawline_b').value=d.jawline.b;}
                if(d.neck.l){document.getElementById('neck_l').value=d.neck.l;document.getElementById('neck_a').value=d.neck.a;document.getElementById('neck_b').value=d.neck.b;}
                update();
            }
        }
    </script>
</body>
</html>
